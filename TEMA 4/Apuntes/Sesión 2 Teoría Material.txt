Sesi√≥n 2: Teor√≠a
üìò Material Docente: Sesi√≥n 2
Interactividad: Eventos y Estado (useState)
1. El Sistema de Eventos en React

Hasta ahora, nuestros componentes solo mostraban informaci√≥n est√°tica. Para que el usuario interact√∫e (clicks, escritura, formularios), necesitamos usar Eventos.

React utiliza su propio sistema de eventos sint√©ticos (Synthetic Events). Se parecen mucho a los de HTML nativo, pero con dos diferencias clave:

    CamelCase: Se escriben como onClick, onChange, onSubmit (en vez de onclick).
    Funciones, no strings: Pasamos la funci√≥n ejecutora directamente {handleClick}, no un string "handleClick()".

TypeScript y los Eventos

Este es uno de los puntos donde m√°s ayuda TypeScript. Cuando definimos la funci√≥n manejadora fuera del JSX, necesitamos decirle qu√© tipo de evento es para obtener autocompletado. Los m√°s comunes est√°n en el namespace React:

    React.MouseEvent<HTMLButtonElement>: Click en un bot√≥n.
    React.ChangeEvent<HTMLInputElement>: Escribir en un input.
    React.FormEvent: Env√≠o de un formulario.

const Button = () => {
  // Definimos el evento expl√≠citamente para tener autocompletado en 'e'
  const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {
    console.log('Coordenadas del click:', e.clientX, e.clientY);
  };

  return <button onClick={handleClick}>Haz Click</button>;
};

export default Button;
2. El Estado (useState): La memoria del componente

Si intentas usar una variable normal (let count = 0) para llevar una cuenta y mostrarla en pantalla, ver√°s que no funciona. Aunque la variable cambie en el c√≥digo, React no se entera y no actualiza (re-renderiza) la pantalla.
El Hook useState

useState es una funci√≥n que nos permite guardar un valor y nos da una forma de actualizarlo, avisando a React para que pinte de nuevo el componente.
Sintaxis de Desestructuraci√≥n:
const [count, setCount] = useState(0);

    count: El valor actual (solo lectura directa).
    setCount: La funci√≥n "m√°gica" para modificar el valor.
    useState(0): El valor inicial.

import { useState } from 'react';

const Counter = () => {
  // TypeScript infiere que es 'number' porque el valor inicial es 0
  const [count, setCount] = useState(0);

  const handleIncrement = () => {
    // ‚úÖ CORRECTO: Usar el setter para avisar a React
    setCount(count + 1);
  };

  return (
    <div>
      <p>Has pulsado {count} veces</p>
      <button onClick={handleIncrement}>Sumar +1</button>
    </div>
  );
};

export default Counter;
3. Actualizaciones de Estado: La trampa as√≠ncrona

Es vital entender que setCount no cambia el valor inmediatamente. Lo que hace es "agendar" una actualizaci√≥n para el pr√≥ximo renderizado.
Soluci√≥n: Functional Updates

Cuando el nuevo estado depende del anterior (ej: sumar 1 a lo que hab√≠a), debemos pasar una funci√≥n al setter. React nos garantiza que recibir√° el valor m√°s actualizado.
const handleTripleClick = () => {
  // Forma segura: Usamos 'prevCount' (el valor anterior garantizado)
  setCount((prevCount) => prevCount + 1);
  setCount((prevCount) => prevCount + 1);
  setCount((prevCount) => prevCount + 1);
  // Resultado: Ahora s√≠ suma 3
};
4. Inmutabilidad: Objetos y Arrays en el Estado

React decide si debe actualizar la pantalla comparando referencias de memoria. Si modificamos un objeto directamente, la referencia es la misma y React no hace nada.

Debemos usar el Spread Operator (...) para crear una copia nueva del objeto con los cambios.
const birthday = () => {
  // ‚úÖ Correcto: Creamos un NUEVO objeto copiando lo anterior y sobreescribiendo age
  setUser({ ...user, age: 26 });
};
5. Renderizado Condicional con Estado

El estado suele usarse para controlar qu√© se ve en pantalla (mostrar/ocultar elementos).
const [isVisible, setIsVisible] = useState(true);

return (
  <div>
    <button onClick={() => setIsVisible(!isVisible)}>
      {isVisible ? 'Ocultar' : 'Mostrar'} Mensaje
    </button>

    {/* Si isVisible es true, renderiza el p√°rrafo */}
    {isVisible && <p>¬°Mensaje secreto!</p>}
  </div>
);
Resumen: Conceptos Clave
Concepto 	C√≥digo 	Qu√© hace
Evento 	onClick={handleClick} 	Ejecuta la funci√≥n al interactuar.
Definir Estado 	const [val, set] = useState(0) 	Crea memoria persistente.
Actualizar 	setVal(5) 	Cambia el valor y re-renderiza.
Funcional 	setVal(prev => prev + 1) 	Usa el valor anterior de forma segura.
Objetos 	setObj({...obj, nuevo: 1}) 	Copia el objeto (inmutabilidad).
